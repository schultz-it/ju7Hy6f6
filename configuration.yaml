# Loads default set of integrations. Do not remove.
default_config:

homeassistant:
  # Name of the location where Home Assistant is running
  name: "BruFi Home Assistant"
  # Location required to calculate the time the sun rises and sets
  latitude: 45.665
  longitude: 9.309
  elevation: 261
  # 'metric' for Metric, 'us_customary' for US Customary
  unit_system: metric
  # Pick yours from here: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: "Europe/Rome"
  #customize: !include customize.yaml
  packages: !include_dir_named packages

# Templates: carica tutti i file YAML presenti nella cartella /config/templates/
template: !include_dir_merge_list templates/

automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml

# -------------------------------
# Lovelace in modalit√† YAML
# -------------------------------
lovelace:
  mode: yaml
  resources:
    - url: /hacsfiles/lovelace-mushroom/mushroom.js
      type: module
    - url: /hacsfiles/apexcharts-card/apexcharts-card.js
      type: module
    - url: /hacsfiles/button-card/button-card.js
      type: module
    - url: /hacsfiles/lovelace-card-mod/card-mod.js
      type: module
    - url: /hacsfiles/irrigation-unlimited-card/irrigation-unlimited-card.js
      type: module
    - url: /hacsfiles/Bubble-Card/bubble-card.js
      type: module
    - url: /hacsfiles/energy-period-selector-plus/energy-period-selector-plus.js
      type: module
    - url: /hacsfiles/ha-energy-entity-card/ha-energy-entity-card.js
      type: module
    - url: /hacsfiles/lovelace-solar-card/solar-card.js
      type: module
  dashboards:
    
    # solar-dashboard:
    #   mode: yaml
    #   title: Fotovoltaico Correzzana
    #   icon: mdi:solar-power
    #   show_in_sidebar: true
    #   filename: lovelace/solar_dashboard.yaml

    irrigazionecorrezzana-dashboard:
      mode: yaml
      title: Irrigazione Correzzana
      icon: mdi:sprinkler-variant
      show_in_sidebar: true
      filename: lovelace/irrigazione_correzzana.yaml
      

# Load frontend themes from the themes folder
frontend:
  themes: !include_dir_merge_named themes

sensor:
  - platform: integration
    unique_id: sh60rs_a2251102546_mppt1_energy
    source: sensor.sh60rs_a2251102546_mppt1_power
    name: SH60RS MPPT1 Energy
    method: left
    round: 4
  - platform: integration
    unique_id: sh60rs_a2251102546_mppt2_energy
    source: sensor.sh60rs_a2251102546_mppt2_power
    name: SH60RS MPPT2 Energy
    method: left
    round: 4
  - platform: integration
    unique_id: sh60rs_a2251102546_mppt3_energy
    source: sensor.sh60rs_a2251102546_mppt3_power
    name: SH60RS MPPT3 Energy
    method: left
    round: 4
  - platform: integration
    unique_id: sh60rs_a2251102546_purchased_energy
    source: sensor.sh60rs_a2251102546_purchased_power
    name: Purchased from Grid
    method: left
    round: 4
  - platform: integration
    unique_id: sh60rs_a2251102546_total_export_active_power
    source: sensor.sh60rs_a2251102546_total_export_active_power
    name: Sold to Grid
    method: left
    round: 4
  - platform: integration
    unique_id: sonoff_100255c289_power
    source: sensor.sonoff_100255c289_power
    name: Consumo Lavastoviglie
    method: left
    round: 4
  - platform: integration
    unique_id: sonoff_100255c8f1_power
    source: sensor.sonoff_100255c8f1_power
    name: Consumo Asciugatrice
    method: left
    round: 4
  - platform: integration
    unique_id: sonoff_100255c2d6_power
    source: sensor.sonoff_100255c2d6_power
    name: Consumo Lavatrice
    method: left
    round: 4
  - platform: integration
    unique_id: sonoff_100255cf16_power
    source: sensor.sonoff_100255cf16_power
    name: Consumo PC
    method: left
    round: 4
  - platform: history_stats
    name: Prato ON ultimi 24h
    entity_id: binary_sensor.irrigation_unlimited_c1_z1
    state: 'on'
    type: time
    start: "{{ now().replace(hour=0, minute=0, second=0) }}"
    end: "{{ now() }}"

shell_command:
  ha_git_nightly_commit: 'bash /config/scripts/ha_commit.sh'
  ha_git_force_push: 'bash /config/scripts/ha_forcepush.sh'
  ha_git_scarica_remoto: 'bash /config/scripts/ha_scaricaremoto.sh'
  ha_git_sync: 'bash /config/scripts/ha_sync.sh'
  
utility_meter: !include utility_meter.yaml

input_text:
  last_irrigation_program:
    name: "Ultimo programma irrigazione"
  prev_irrigation_program:
    name: "Penultimo programma irrigazione"


#shell_command:
 # pushupdates_to_github: /bin/bash pushupdates.sh

# CONFIGURAZIONE MODBUS PER EUROTHERM SMARTCONTROL365 VECCHIA
#modbus: !include eurotherm.yaml


