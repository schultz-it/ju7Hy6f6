title: Fotovoltaico Correzzana
views:
  - title: Controlli rapidi
    path: fv-quick
    icon: mdi:flash
    type: sections
    sections:
      - type: grid
        cards:
          - type: markdown
            content: |
              ### Mappatura entità (editami se vedi `Unknown`)
              - **Potenza FV (W)** → `sensor.sh60rs_a2251102546_mppt_total_power`
              - **Rete (W)** → `sensor.grid_power` *(sostituisci con la tua entità)*
              - **Carichi (W)** → `sensor.house_load` *(sostituisci)*
              - **FV Oggi (kWh)** → `sensor.fv_today_kwh` *(sostituisci)*
              - **Import Oggi (kWh)** → `sensor.grid_import_today_kwh` *(sostituisci)*
              - **Export Oggi (kWh)** → `sensor.grid_export_today_kwh` *(sostituisci)*
              - **FV Totale (kWh)** → `sensor.fv_total_kwh` *(sostituisci)*
          - type: entities
            title: Controlli rapidi
            entities:
              - entity: sensor.sh60rs_a2251102546_mppt_total_power
                name: Potenza FV (W)
              - entity: sensor.grid_power
                name: Potenza Rete (+Imp/-Exp)
              - entity: sensor.house_load
                name: Carichi (W)
              - entity: sensor.fv_today_kwh
                name: FV Oggi (kWh)
              - entity: sensor.grid_import_today_kwh
                name: Import Oggi (kWh)
              - entity: sensor.grid_export_today_kwh
                name: Export Oggi (kWh)
              - entity: sensor.fv_total_kwh
                name: FV Totale (kWh)

  - title: Andamento
    path: fv-trends
    icon: mdi:chart-line
    cards:
      - type: custom:apexcharts-card
        header:
          show: true
          title: Produzione FV ultimi 7 giorni
        graph_span: 7d
        span:
          start: day
        series:
          - entity: sensor.fv_today_kwh
            name: FV giornaliero
            type: column
            statistics:
              type: sum
            group_by:
              duration: 1d
              func: last
      - type: custom:apexcharts-card
        header:
          show: true
          title: Import/Export ultimi 7 giorni
        graph_span: 7d
        span:
          start: day
        series:
          - entity: sensor.grid_import_today_kwh
            name: Import
            type: column
            yaxis_id: kwh
            statistics:
              type: sum
            group_by:
              duration: 1d
              func: last
          - entity: sensor.grid_export_today_kwh
            name: Export
            type: column
            yaxis_id: kwh
            statistics:
              type: sum
            group_by:
              duration: 1d
              func: last
        apex_config:
          yaxis:
            - id: kwh
              min: 0

  - title: Diagnostica
    path: fv-diag
    icon: mdi:stethoscope
    cards:
      - type: entities
        title: Stato Inverter
        entities:
          - entity: sensor.inverter_state
            name: Stato Inverter
          - entity: sensor.inverter_temperature
            name: Temperatura Inverter
          - entity: sensor.dc_voltage
            name: Tensione DC
          - entity: sensor.phase_a_current
            name: Corrente Fase A
      - type: entities
        title: MPPT e misure varie
        entities:
          - entity: sensor.sh60rs_a2251102546_mppt_total_power
            name: SH60RS ... MPPT Total Power
          - entity: sensor.sh60rs_a2251102546_mppt1_power
            name: SH60RS MPPT1 Power
          - entity: sensor.sh60rs_a2251102546_mppt2_power
            name: SH60RS MPPT2 Power
          - entity: sensor.sh60rs_mppt3_energy
            name: SH60RS MPPT3 Energy
          - entity: sensor.sh60rs_mppt4_energy
            name: SH60RS MPPT4 Energy
